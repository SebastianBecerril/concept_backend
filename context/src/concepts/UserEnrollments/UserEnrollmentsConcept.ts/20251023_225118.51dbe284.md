---
timestamp: 'Thu Oct 23 2025 22:51:18 GMT-0400 (Eastern Daylight Time)'
content_id: 51dbe28415e0cade096311be77ad563cc3db13477a4a48cfdb83fda828d2fdf2
---

# file: src/concepts/UserEnrollments/UserEnrollmentsConcept.ts

```typescript
import { Collection, Db } from "npm:mongodb";
import { Empty, ID } from "@utils/types.ts";
import { freshID } from "@utils/database.ts";

interface EnrollmentSchema {
  _id: ID;
  owner: ID;
  course: ID;
  section: ID;
  visibility: boolean;
}

/**
 * @concept UserEnrollments
 * @purpose Enable users to declare and manage their enrollment in specific course sections and control its visibility to other members in their communities.
 * @principle After a user adds an enrollment, their registered courses and sections can be viewed by other community members, subject to visibility settings.
 */
export default class UserEnrollmentsConcept {
  private static readonly PREFIX = "UserEnrollments" + ".";

  /**
   * @state
   * a set of Enrollments with
   *   an `owner` User
   *   a `course` Course
   *   a `section` Section
   *   a `visibility` flag
   */
  enrollments: Collection<EnrollmentSchema>;

  constructor(private readonly db: Db) {
    this.enrollments = this.db.collection(
      UserEnrollmentsConcept.PREFIX + "enrollments",
    );

    this.enrollments.createIndex({ owner: 1, course: 1 }, { unique: true })
      .catch(console.error);
  }
}

```
